<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/person/header-logo.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-YTP6YEPL7J"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-YTP6YEPL7J', { send_page_view: false });</script><title>vue 构建优化方案及升级流程 | ddd`s blog</title><meta name="description" content="ddd`s的blog站点">
    <link rel="modulepreload" href="/myblog/assets/app.4c8b15c1.js"><link rel="modulepreload" href="/myblog/assets/webpackCase.html.26d56e03.js"><link rel="modulepreload" href="/myblog/assets/webpackCase.html.b0cf4026.js"><link rel="prefetch" href="/myblog/assets/index.html.4721d112.js"><link rel="prefetch" href="/myblog/assets/SSE.html.aae7241a.js"><link rel="prefetch" href="/myblog/assets/aiRead.html.862d54e2.js"><link rel="prefetch" href="/myblog/assets/gpt1.html.5ea5d05b.js"><link rel="prefetch" href="/myblog/assets/gpt2.html.31b11bc8.js"><link rel="prefetch" href="/myblog/assets/gpt3.html.22c1f689.js"><link rel="prefetch" href="/myblog/assets/gpt4.html.987be3ad.js"><link rel="prefetch" href="/myblog/assets/cursor-workflow1.html.e424edc5.js"><link rel="prefetch" href="/myblog/assets/cursor-workflow2.html.0a0636ef.js"><link rel="prefetch" href="/myblog/assets/cursor-workflow3.html.7031a41e.js"><link rel="prefetch" href="/myblog/assets/personalShare.html.13a052b5.js"><link rel="prefetch" href="/myblog/assets/share.html.c841794f.js"><link rel="prefetch" href="/myblog/assets/share_2.html.e31248cf.js"><link rel="prefetch" href="/myblog/assets/share_3.html.21a9d787.js"><link rel="prefetch" href="/myblog/assets/share_4.html.42151f13.js"><link rel="prefetch" href="/myblog/assets/share_5.html.75490bde.js"><link rel="prefetch" href="/myblog/assets/share_6.html.18d9e4bf.js"><link rel="prefetch" href="/myblog/assets/心学.html.965dafa7.js"><link rel="prefetch" href="/myblog/assets/道德经.html.81048dee.js"><link rel="prefetch" href="/myblog/assets/社会心理学.html.c83e72e1.js"><link rel="prefetch" href="/myblog/assets/逆商.html.2a1947db.js"><link rel="prefetch" href="/myblog/assets/阿德勒.html.62463965.js"><link rel="prefetch" href="/myblog/assets/bom.html.6377b95c.js"><link rel="prefetch" href="/myblog/assets/bomView.html.5641c8fc.js"><link rel="prefetch" href="/myblog/assets/postMessage.html.1e11cb28.js"><link rel="prefetch" href="/myblog/assets/requestAnimationFrame.html.4aff8cd0.js"><link rel="prefetch" href="/myblog/assets/css.html.3ff5ede4.js"><link rel="prefetch" href="/myblog/assets/css2.html.a68883e1.js"><link rel="prefetch" href="/myblog/assets/css3.html.b2a809c3.js"><link rel="prefetch" href="/myblog/assets/css4.html.544eeea9.js"><link rel="prefetch" href="/myblog/assets/css5.html.1d2a3625.js"><link rel="prefetch" href="/myblog/assets/css6.html.2a72355d.js"><link rel="prefetch" href="/myblog/assets/scss.html.861a334c.js"><link rel="prefetch" href="/myblog/assets/html.html.3867686a.js"><link rel="prefetch" href="/myblog/assets/js.html.7de2c71d.js"><link rel="prefetch" href="/myblog/assets/map.html.0dc52cfd.js"><link rel="prefetch" href="/myblog/assets/practice.html.56c2ba78.js"><link rel="prefetch" href="/myblog/assets/node.html.1da44a6e.js"><link rel="prefetch" href="/myblog/assets/notes.html.fb65a104.js"><link rel="prefetch" href="/myblog/assets/base.html.aed0c6a9.js"><link rel="prefetch" href="/myblog/assets/app.html.fe2879e8.js"><link rel="prefetch" href="/myblog/assets/harmony.html.c9b8375b.js"><link rel="prefetch" href="/myblog/assets/harmony2.html.515c81b4.js"><link rel="prefetch" href="/myblog/assets/fullpage.html.551ec5ad.js"><link rel="prefetch" href="/myblog/assets/hook.html.d39b56a7.js"><link rel="prefetch" href="/myblog/assets/nuxt1.html.e6783d49.js"><link rel="prefetch" href="/myblog/assets/nuxt2.html.0d375ff7.js"><link rel="prefetch" href="/myblog/assets/nuxt3.html.ff08c1b2.js"><link rel="prefetch" href="/myblog/assets/nuxt4.html.72c4cac1.js"><link rel="prefetch" href="/myblog/assets/nuxt5.html.60fc5f4f.js"><link rel="prefetch" href="/myblog/assets/notes.html.6c413f64.js"><link rel="prefetch" href="/myblog/assets/react.html.ee44a9c6.js"><link rel="prefetch" href="/myblog/assets/react2.html.45731a37.js"><link rel="prefetch" href="/myblog/assets/react3.html.b80ed68b.js"><link rel="prefetch" href="/myblog/assets/react4.html.497d8901.js"><link rel="prefetch" href="/myblog/assets/react5.html.e8779a4d.js"><link rel="prefetch" href="/myblog/assets/react6.html.26e7ecc9.js"><link rel="prefetch" href="/myblog/assets/react7.html.04e3710c.js"><link rel="prefetch" href="/myblog/assets/react8.html.2718fb26.js"><link rel="prefetch" href="/myblog/assets/uniapp1.html.97d38e55.js"><link rel="prefetch" href="/myblog/assets/uniapp2.html.29cd9cb8.js"><link rel="prefetch" href="/myblog/assets/uniapp3.html.e26ec1dd.js"><link rel="prefetch" href="/myblog/assets/uniapp4.html.df1b1754.js"><link rel="prefetch" href="/myblog/assets/workApply1.html.39bf4400.js"><link rel="prefetch" href="/myblog/assets/workApply10.html.0bd0fe92.js"><link rel="prefetch" href="/myblog/assets/workApply11.html.f8cd42ac.js"><link rel="prefetch" href="/myblog/assets/workApply12.html.4aec0709.js"><link rel="prefetch" href="/myblog/assets/workApply13.html.12f8ae22.js"><link rel="prefetch" href="/myblog/assets/workApply14.html.dbae42ba.js"><link rel="prefetch" href="/myblog/assets/workApply15.html.de67ea67.js"><link rel="prefetch" href="/myblog/assets/workApply16.html.90cdb2ca.js"><link rel="prefetch" href="/myblog/assets/workApply17.html.1ed283c9.js"><link rel="prefetch" href="/myblog/assets/workApply18.html.5d306c13.js"><link rel="prefetch" href="/myblog/assets/workApply19.html.e4a233e8.js"><link rel="prefetch" href="/myblog/assets/workApply2.html.6aaf904f.js"><link rel="prefetch" href="/myblog/assets/workApply20.html.7435b15d.js"><link rel="prefetch" href="/myblog/assets/workApply21.html.f793910c.js"><link rel="prefetch" href="/myblog/assets/workApply22.html.a6d1f42f.js"><link rel="prefetch" href="/myblog/assets/workApply23.html.23bccbba.js"><link rel="prefetch" href="/myblog/assets/workApply24.html.b9f32b5a.js"><link rel="prefetch" href="/myblog/assets/workApply25.html.bafe0d73.js"><link rel="prefetch" href="/myblog/assets/workApply26.html.6bc24dca.js"><link rel="prefetch" href="/myblog/assets/workApply27.html.b4148efc.js"><link rel="prefetch" href="/myblog/assets/workApply28.html.cbc936be.js"><link rel="prefetch" href="/myblog/assets/workApply3.html.5ee26992.js"><link rel="prefetch" href="/myblog/assets/workApply4.html.955edb34.js"><link rel="prefetch" href="/myblog/assets/workApply5.html.9c1ecdaf.js"><link rel="prefetch" href="/myblog/assets/workApply6.html.bb9ad99e.js"><link rel="prefetch" href="/myblog/assets/workApply7.html.2205b8b6.js"><link rel="prefetch" href="/myblog/assets/workApply8.html.6dab6a94.js"><link rel="prefetch" href="/myblog/assets/workApply9.html.8b2b0886.js"><link rel="prefetch" href="/myblog/assets/ciWechatMini.html.e9e0acbe.js"><link rel="prefetch" href="/myblog/assets/webviewBridge.html.1266750d.js"><link rel="prefetch" href="/myblog/assets/workApply.html.de773b7a.js"><link rel="prefetch" href="/myblog/assets/hotUpdate.html.6abb7a2d.js"><link rel="prefetch" href="/myblog/assets/loseCode.html.9a32c411.js"><link rel="prefetch" href="/myblog/assets/loseRely.html.4ca293a4.js"><link rel="prefetch" href="/myblog/assets/pay.html.5c3f217f.js"><link rel="prefetch" href="/myblog/assets/image.html.4b3439b6.js"><link rel="prefetch" href="/myblog/assets/wechat.html.7b0fb96d.js"><link rel="prefetch" href="/myblog/assets/chatWebview.html.a986dd97.js"><link rel="prefetch" href="/myblog/assets/code1.html.df2d96c0.js"><link rel="prefetch" href="/myblog/assets/code2.html.44b62711.js"><link rel="prefetch" href="/myblog/assets/code3.html.82bc5453.js"><link rel="prefetch" href="/myblog/assets/monitor.html.d4b3cc1a.js"><link rel="prefetch" href="/myblog/assets/monitorSDK.html.0cf6d1e9.js"><link rel="prefetch" href="/myblog/assets/codeReuse.html.72bd8f85.js"><link rel="prefetch" href="/myblog/assets/git.html.bf32a6f2.js"><link rel="prefetch" href="/myblog/assets/qiankun1.html.9dd2d97e.js"><link rel="prefetch" href="/myblog/assets/qiankun2.html.8d068ff8.js"><link rel="prefetch" href="/myblog/assets/qiankun3.html.af5c2ad7.js"><link rel="prefetch" href="/myblog/assets/qiankun4.html.b1220b49.js"><link rel="prefetch" href="/myblog/assets/qiankun5.html.4aac0af4.js"><link rel="prefetch" href="/myblog/assets/package.html.89bb4c30.js"><link rel="prefetch" href="/myblog/assets/package1.html.a389173c.js"><link rel="prefetch" href="/myblog/assets/package2.html.e71c32a7.js"><link rel="prefetch" href="/myblog/assets/codeStandard.html.c4233831.js"><link rel="prefetch" href="/myblog/assets/codeStandard2.html.905e670f.js"><link rel="prefetch" href="/myblog/assets/test.html.87993038.js"><link rel="prefetch" href="/myblog/assets/Webpack5.html.c5462a20.js"><link rel="prefetch" href="/myblog/assets/vuepress.html.d99f3134.js"><link rel="prefetch" href="/myblog/assets/code1.html.cad69ae5.js"><link rel="prefetch" href="/myblog/assets/monitor.html.059ef06b.js"><link rel="prefetch" href="/myblog/assets/monitorSDK.html.b3d7a543.js"><link rel="prefetch" href="/myblog/assets/toolFun.html.de0f1fb8.js"><link rel="prefetch" href="/myblog/assets/macTool.html.943fc137.js"><link rel="prefetch" href="/myblog/assets/tool.html.949ab96c.js"><link rel="prefetch" href="/myblog/assets/vercel.html.6dbab05d.js"><link rel="prefetch" href="/myblog/assets/compositionApi.html.7c160aa4.js"><link rel="prefetch" href="/myblog/assets/vue2-7.html.41bc90b2.js"><link rel="prefetch" href="/myblog/assets/npmPrams.html.d8b19a85.js"><link rel="prefetch" href="/myblog/assets/pxtoviewport.html.3f6ba50c.js"><link rel="prefetch" href="/myblog/assets/404.html.265028f6.js"><link rel="prefetch" href="/myblog/assets/index.html.ebb35400.js"><link rel="prefetch" href="/myblog/assets/SSE.html.8160cf30.js"><link rel="prefetch" href="/myblog/assets/aiRead.html.e298a7b9.js"><link rel="prefetch" href="/myblog/assets/gpt1.html.f3ade5e3.js"><link rel="prefetch" href="/myblog/assets/gpt2.html.43c00908.js"><link rel="prefetch" href="/myblog/assets/gpt3.html.cabf288b.js"><link rel="prefetch" href="/myblog/assets/gpt4.html.4396c718.js"><link rel="prefetch" href="/myblog/assets/cursor-workflow1.html.476c14df.js"><link rel="prefetch" href="/myblog/assets/cursor-workflow2.html.b63506d7.js"><link rel="prefetch" href="/myblog/assets/cursor-workflow3.html.696a364c.js"><link rel="prefetch" href="/myblog/assets/personalShare.html.b87a429e.js"><link rel="prefetch" href="/myblog/assets/share.html.13c73e47.js"><link rel="prefetch" href="/myblog/assets/share_2.html.08b12443.js"><link rel="prefetch" href="/myblog/assets/share_3.html.19a5c1dd.js"><link rel="prefetch" href="/myblog/assets/share_4.html.a7001255.js"><link rel="prefetch" href="/myblog/assets/share_5.html.6e9efa9b.js"><link rel="prefetch" href="/myblog/assets/share_6.html.e6dafc5e.js"><link rel="prefetch" href="/myblog/assets/心学.html.fff85f71.js"><link rel="prefetch" href="/myblog/assets/道德经.html.6a66223a.js"><link rel="prefetch" href="/myblog/assets/社会心理学.html.25b20d79.js"><link rel="prefetch" href="/myblog/assets/逆商.html.891d7f26.js"><link rel="prefetch" href="/myblog/assets/阿德勒.html.4ba466b3.js"><link rel="prefetch" href="/myblog/assets/bom.html.71d6142c.js"><link rel="prefetch" href="/myblog/assets/bomView.html.3e7e5aec.js"><link rel="prefetch" href="/myblog/assets/postMessage.html.1bb00862.js"><link rel="prefetch" href="/myblog/assets/requestAnimationFrame.html.d3feb3a4.js"><link rel="prefetch" href="/myblog/assets/css.html.f2e943de.js"><link rel="prefetch" href="/myblog/assets/css2.html.1514fccf.js"><link rel="prefetch" href="/myblog/assets/css3.html.1bc1b995.js"><link rel="prefetch" href="/myblog/assets/css4.html.89645d40.js"><link rel="prefetch" href="/myblog/assets/css5.html.68536f2b.js"><link rel="prefetch" href="/myblog/assets/css6.html.281d8ee7.js"><link rel="prefetch" href="/myblog/assets/scss.html.8f5b2855.js"><link rel="prefetch" href="/myblog/assets/html.html.16d87a02.js"><link rel="prefetch" href="/myblog/assets/js.html.60f98f80.js"><link rel="prefetch" href="/myblog/assets/map.html.6410fba4.js"><link rel="prefetch" href="/myblog/assets/practice.html.b21d48ed.js"><link rel="prefetch" href="/myblog/assets/node.html.802c9a09.js"><link rel="prefetch" href="/myblog/assets/notes.html.cf7d2a82.js"><link rel="prefetch" href="/myblog/assets/base.html.fe26b3b6.js"><link rel="prefetch" href="/myblog/assets/app.html.a7a9e4e5.js"><link rel="prefetch" href="/myblog/assets/harmony.html.a0153804.js"><link rel="prefetch" href="/myblog/assets/harmony2.html.6a8339cc.js"><link rel="prefetch" href="/myblog/assets/fullpage.html.fc3782ee.js"><link rel="prefetch" href="/myblog/assets/hook.html.5e02b155.js"><link rel="prefetch" href="/myblog/assets/nuxt1.html.d9c2db10.js"><link rel="prefetch" href="/myblog/assets/nuxt2.html.16d84764.js"><link rel="prefetch" href="/myblog/assets/nuxt3.html.f8832778.js"><link rel="prefetch" href="/myblog/assets/nuxt4.html.12fe634b.js"><link rel="prefetch" href="/myblog/assets/nuxt5.html.31c19cb1.js"><link rel="prefetch" href="/myblog/assets/notes.html.d76778b8.js"><link rel="prefetch" href="/myblog/assets/react.html.07243292.js"><link rel="prefetch" href="/myblog/assets/react2.html.b4cac7da.js"><link rel="prefetch" href="/myblog/assets/react3.html.0f2bc779.js"><link rel="prefetch" href="/myblog/assets/react4.html.6ccf961c.js"><link rel="prefetch" href="/myblog/assets/react5.html.8d91cc6a.js"><link rel="prefetch" href="/myblog/assets/react6.html.f02d8c43.js"><link rel="prefetch" href="/myblog/assets/react7.html.176f5012.js"><link rel="prefetch" href="/myblog/assets/react8.html.ce4cdd8c.js"><link rel="prefetch" href="/myblog/assets/uniapp1.html.82cfda57.js"><link rel="prefetch" href="/myblog/assets/uniapp2.html.0c9fe204.js"><link rel="prefetch" href="/myblog/assets/uniapp3.html.1671e0d2.js"><link rel="prefetch" href="/myblog/assets/uniapp4.html.76a6ee5f.js"><link rel="prefetch" href="/myblog/assets/workApply1.html.d3127409.js"><link rel="prefetch" href="/myblog/assets/workApply10.html.2dc23a78.js"><link rel="prefetch" href="/myblog/assets/workApply11.html.b04c5ff0.js"><link rel="prefetch" href="/myblog/assets/workApply12.html.dd0be2f3.js"><link rel="prefetch" href="/myblog/assets/workApply13.html.d565b6e7.js"><link rel="prefetch" href="/myblog/assets/workApply14.html.0a79a35c.js"><link rel="prefetch" href="/myblog/assets/workApply15.html.b63b6b2b.js"><link rel="prefetch" href="/myblog/assets/workApply16.html.3ef062c0.js"><link rel="prefetch" href="/myblog/assets/workApply17.html.3d988977.js"><link rel="prefetch" href="/myblog/assets/workApply18.html.61b7200d.js"><link rel="prefetch" href="/myblog/assets/workApply19.html.42af87b1.js"><link rel="prefetch" href="/myblog/assets/workApply2.html.c0f174a6.js"><link rel="prefetch" href="/myblog/assets/workApply20.html.78ac0acb.js"><link rel="prefetch" href="/myblog/assets/workApply21.html.6c7c6a8b.js"><link rel="prefetch" href="/myblog/assets/workApply22.html.19856fb8.js"><link rel="prefetch" href="/myblog/assets/workApply23.html.fe28f195.js"><link rel="prefetch" href="/myblog/assets/workApply24.html.c1becf1b.js"><link rel="prefetch" href="/myblog/assets/workApply25.html.05ede3bf.js"><link rel="prefetch" href="/myblog/assets/workApply26.html.0a5439e1.js"><link rel="prefetch" href="/myblog/assets/workApply27.html.47fbc9b7.js"><link rel="prefetch" href="/myblog/assets/workApply28.html.f1447876.js"><link rel="prefetch" href="/myblog/assets/workApply3.html.2b321d2a.js"><link rel="prefetch" href="/myblog/assets/workApply4.html.4b5020e2.js"><link rel="prefetch" href="/myblog/assets/workApply5.html.c9337ec3.js"><link rel="prefetch" href="/myblog/assets/workApply6.html.de876edf.js"><link rel="prefetch" href="/myblog/assets/workApply7.html.4bd17166.js"><link rel="prefetch" href="/myblog/assets/workApply8.html.eaf2ab8c.js"><link rel="prefetch" href="/myblog/assets/workApply9.html.43bdce9d.js"><link rel="prefetch" href="/myblog/assets/ciWechatMini.html.270c10f3.js"><link rel="prefetch" href="/myblog/assets/webviewBridge.html.fdd5c2c6.js"><link rel="prefetch" href="/myblog/assets/workApply.html.3c3eba7d.js"><link rel="prefetch" href="/myblog/assets/hotUpdate.html.d634a1f2.js"><link rel="prefetch" href="/myblog/assets/loseCode.html.8b4a7223.js"><link rel="prefetch" href="/myblog/assets/loseRely.html.293ec6ee.js"><link rel="prefetch" href="/myblog/assets/pay.html.06ae4d7a.js"><link rel="prefetch" href="/myblog/assets/image.html.d15f2a96.js"><link rel="prefetch" href="/myblog/assets/wechat.html.6a241efd.js"><link rel="prefetch" href="/myblog/assets/chatWebview.html.b380a3b6.js"><link rel="prefetch" href="/myblog/assets/code1.html.544b6c18.js"><link rel="prefetch" href="/myblog/assets/code2.html.58a7b834.js"><link rel="prefetch" href="/myblog/assets/code3.html.f313f971.js"><link rel="prefetch" href="/myblog/assets/monitor.html.044a1435.js"><link rel="prefetch" href="/myblog/assets/monitorSDK.html.3d345312.js"><link rel="prefetch" href="/myblog/assets/codeReuse.html.06ef5798.js"><link rel="prefetch" href="/myblog/assets/git.html.3802da2a.js"><link rel="prefetch" href="/myblog/assets/qiankun1.html.af1b6546.js"><link rel="prefetch" href="/myblog/assets/qiankun2.html.9876b69b.js"><link rel="prefetch" href="/myblog/assets/qiankun3.html.f0795b1d.js"><link rel="prefetch" href="/myblog/assets/qiankun4.html.1db48106.js"><link rel="prefetch" href="/myblog/assets/qiankun5.html.c03bb67c.js"><link rel="prefetch" href="/myblog/assets/package.html.37d7dd24.js"><link rel="prefetch" href="/myblog/assets/package1.html.239bee37.js"><link rel="prefetch" href="/myblog/assets/package2.html.4f8c9247.js"><link rel="prefetch" href="/myblog/assets/codeStandard.html.bde7378f.js"><link rel="prefetch" href="/myblog/assets/codeStandard2.html.2a7c3253.js"><link rel="prefetch" href="/myblog/assets/test.html.7c4e24d6.js"><link rel="prefetch" href="/myblog/assets/Webpack5.html.5a63951a.js"><link rel="prefetch" href="/myblog/assets/vuepress.html.79fc2fb0.js"><link rel="prefetch" href="/myblog/assets/code1.html.d9387ef7.js"><link rel="prefetch" href="/myblog/assets/monitor.html.16e00508.js"><link rel="prefetch" href="/myblog/assets/monitorSDK.html.a143d5ad.js"><link rel="prefetch" href="/myblog/assets/toolFun.html.424b712d.js"><link rel="prefetch" href="/myblog/assets/macTool.html.14ead1d6.js"><link rel="prefetch" href="/myblog/assets/tool.html.29538057.js"><link rel="prefetch" href="/myblog/assets/vercel.html.925c9561.js"><link rel="prefetch" href="/myblog/assets/compositionApi.html.ff7808b7.js"><link rel="prefetch" href="/myblog/assets/vue2-7.html.270a2bd6.js"><link rel="prefetch" href="/myblog/assets/npmPrams.html.3ae0903b.js"><link rel="prefetch" href="/myblog/assets/pxtoviewport.html.1f8175e2.js"><link rel="prefetch" href="/myblog/assets/404.html.ec34f3e3.js"><link rel="prefetch" href="/myblog/assets/404.2d9fc1e0.js"><link rel="prefetch" href="/myblog/assets/Layout.caa6d458.js">
    <link rel="stylesheet" href="/myblog/assets/style.1b4c1786.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/myblog/" class=""><img class="logo" src="/myblog/images/person/header-logo.png" alt="ddd`s blog"><span class="site-name can-hide">ddd`s blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/base/css/scss.md" class="" aria-label="css"><!--[--><!--]--> css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/base/javaScript/js.md" class="" aria-label="javaScript"><!--[--><!--]--> javaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/base/typeScript/notes.md" class="" aria-label="typeScript"><!--[--><!--]--> typeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/base/nodejs/node.md" class="" aria-label="nodejs"><!--[--><!--]--> nodejs <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/base/browser/bom.md" class="" aria-label="浏览器"><!--[--><!--]--> 浏览器 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/vue/workApply1.md" class="" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/wechatMini/ciWechatMini.md" class="" aria-label="小程序"><!--[--><!--]--> 小程序 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/react/react.md" class="" aria-label="react"><!--[--><!--]--> react <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/app/app.md" class="" aria-label="app"><!--[--><!--]--> app <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/nuxt/nuxt1.md" class="" aria-label="nuxt"><!--[--><!--]--> nuxt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/uniapp/uniapp1.md" class="" aria-label="uniapp"><!--[--><!--]--> uniapp <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/harmony/harmony.md" class="" aria-label="鸿蒙开发"><!--[--><!--]--> 鸿蒙开发 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端工程化"><span class="title">前端工程化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端工程化"><span class="title">前端工程化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/SDK/monitor.md" class="" aria-label="前端方案实现"><!--[--><!--]--> 前端方案实现 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/microFrontend/qiankun1.md" class="" aria-label="微前端"><!--[--><!--]--> 微前端 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/git/git.md" class="" aria-label="git相关"><!--[--><!--]--> git相关 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/webpack/Webpack5.md" class="" aria-label="Webpack5"><!--[--><!--]--> Webpack5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/standard/codeStandard2.md" class="" aria-label="代码规范"><!--[--><!--]--> 代码规范 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/test/test.md" class="" aria-label="前端测试"><!--[--><!--]--> 前端测试 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/codeReuse/codeReuse.md" class="" aria-label="代码逻辑复用"><!--[--><!--]--> 代码逻辑复用 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/package/package.md" class="" aria-label="包管理工具"><!--[--><!--]--> 包管理工具 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="AI应用"><span class="title">AI应用</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="AI应用"><span class="title">AI应用</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/AI/cursor/cursor-workflow1.md" class="" aria-label="Cursor"><!--[--><!--]--> Cursor <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/AI/apply/gpt1.md" class="" aria-label="AI应用"><!--[--><!--]--> AI应用 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="性能优化"><span class="title">性能优化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="性能优化"><span class="title">性能优化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/performance/wechat/wechat.md" class="" aria-label="小程序优化"><!--[--><!--]--> 小程序优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/performance/application/loseCode.md" class="" aria-label="性能优化实践"><!--[--><!--]--> 性能优化实践 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/performance/image/image.md" class="" aria-label="图片优化"><!--[--><!--]--> 图片优化 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具库"><span class="title">工具库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具库"><span class="title">工具库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/tools/blog/vuepress.md" class="" aria-label="博客搭建"><!--[--><!--]--> 博客搭建 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/tools/tool/tool.md" class="" aria-label="开发工具"><!--[--><!--]--> 开发工具 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/tools/code/toolFun.md" class="" aria-label="代码库"><!--[--><!--]--> 代码库 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/computer/structure/base.md" class="" aria-label="数据结构与算法"><!--[--><!--]--> 数据结构与算法 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="摄影艺术"><span class="title">摄影艺术</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="摄影艺术"><span class="title">摄影艺术</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/art/photo/personalShare.md" class="" aria-label="摄影分享"><!--[--><!--]--> 摄影分享 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="读书笔记"><span class="title">读书笔记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="读书笔记"><span class="title">读书笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/reader/classical/道德经.md" class="" aria-label="古典文学"><!--[--><!--]--> 古典文学 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/reader/psychology/阿德勒.md" class="" aria-label="心理学"><!--[--><!--]--> 心理学 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/other/share/share_4.md" class="" aria-label="前端分享"><!--[--><!--]--> 前端分享 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/base/css/scss.md" class="" aria-label="css"><!--[--><!--]--> css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/base/javaScript/js.md" class="" aria-label="javaScript"><!--[--><!--]--> javaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/base/typeScript/notes.md" class="" aria-label="typeScript"><!--[--><!--]--> typeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/base/nodejs/node.md" class="" aria-label="nodejs"><!--[--><!--]--> nodejs <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/base/browser/bom.md" class="" aria-label="浏览器"><!--[--><!--]--> 浏览器 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/vue/workApply1.md" class="" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/wechatMini/ciWechatMini.md" class="" aria-label="小程序"><!--[--><!--]--> 小程序 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/react/react.md" class="" aria-label="react"><!--[--><!--]--> react <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/app/app.md" class="" aria-label="app"><!--[--><!--]--> app <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/nuxt/nuxt1.md" class="" aria-label="nuxt"><!--[--><!--]--> nuxt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/uniapp/uniapp1.md" class="" aria-label="uniapp"><!--[--><!--]--> uniapp <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/frame/harmony/harmony.md" class="" aria-label="鸿蒙开发"><!--[--><!--]--> 鸿蒙开发 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端工程化"><span class="title">前端工程化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端工程化"><span class="title">前端工程化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/SDK/monitor.md" class="" aria-label="前端方案实现"><!--[--><!--]--> 前端方案实现 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/microFrontend/qiankun1.md" class="" aria-label="微前端"><!--[--><!--]--> 微前端 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/git/git.md" class="" aria-label="git相关"><!--[--><!--]--> git相关 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/webpack/Webpack5.md" class="" aria-label="Webpack5"><!--[--><!--]--> Webpack5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/standard/codeStandard2.md" class="" aria-label="代码规范"><!--[--><!--]--> 代码规范 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/test/test.md" class="" aria-label="前端测试"><!--[--><!--]--> 前端测试 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/codeReuse/codeReuse.md" class="" aria-label="代码逻辑复用"><!--[--><!--]--> 代码逻辑复用 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/project/package/package.md" class="" aria-label="包管理工具"><!--[--><!--]--> 包管理工具 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="AI应用"><span class="title">AI应用</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="AI应用"><span class="title">AI应用</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/AI/cursor/cursor-workflow1.md" class="" aria-label="Cursor"><!--[--><!--]--> Cursor <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/AI/apply/gpt1.md" class="" aria-label="AI应用"><!--[--><!--]--> AI应用 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="性能优化"><span class="title">性能优化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="性能优化"><span class="title">性能优化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/performance/wechat/wechat.md" class="" aria-label="小程序优化"><!--[--><!--]--> 小程序优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/performance/application/loseCode.md" class="" aria-label="性能优化实践"><!--[--><!--]--> 性能优化实践 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/performance/image/image.md" class="" aria-label="图片优化"><!--[--><!--]--> 图片优化 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具库"><span class="title">工具库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具库"><span class="title">工具库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/tools/blog/vuepress.md" class="" aria-label="博客搭建"><!--[--><!--]--> 博客搭建 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/tools/tool/tool.md" class="" aria-label="开发工具"><!--[--><!--]--> 开发工具 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/tools/code/toolFun.md" class="" aria-label="代码库"><!--[--><!--]--> 代码库 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/frontEnd/computer/structure/base.md" class="" aria-label="数据结构与算法"><!--[--><!--]--> 数据结构与算法 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="摄影艺术"><span class="title">摄影艺术</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="摄影艺术"><span class="title">摄影艺术</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/art/photo/personalShare.md" class="" aria-label="摄影分享"><!--[--><!--]--> 摄影分享 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="读书笔记"><span class="title">读书笔记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="读书笔记"><span class="title">读书笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/reader/classical/道德经.md" class="" aria-label="古典文学"><!--[--><!--]--> 古典文学 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/myblog/reader/psychology/阿德勒.md" class="" aria-label="心理学"><!--[--><!--]--> 心理学 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/myblog/other/share/share_4.md" class="" aria-label="前端分享"><!--[--><!--]--> 前端分享 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">webpack学习文档 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/myblog/frontEnd/project/webpack/Webpack5.html" class="sidebar-item" aria-label="webpack5基础文档"><!--[--><!--]--> webpack5基础文档 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">webpack应用于实践 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="vue 构建优化方案及升级流程"><!--[--><!--]--> vue 构建优化方案及升级流程 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#vue及脚手架版本" class="router-link-active router-link-exact-active sidebar-item" aria-label="vue及脚手架版本"><!--[--><!--]--> vue及脚手架版本 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#实测构建速度" class="router-link-active router-link-exact-active sidebar-item" aria-label="实测构建速度"><!--[--><!--]--> 实测构建速度 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#解决方案梳理" class="router-link-active router-link-exact-active sidebar-item" aria-label="解决方案梳理"><!--[--><!--]--> 解决方案梳理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#原版本构建优化流程" class="router-link-active router-link-exact-active sidebar-item" aria-label="原版本构建优化流程"><!--[--><!--]--> 原版本构建优化流程 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#构建时间插件" class="router-link-active router-link-exact-active sidebar-item" aria-label="构建时间插件"><!--[--><!--]--> 构建时间插件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#打包后文件结构分析" class="router-link-active router-link-exact-active sidebar-item" aria-label="打包后文件结构分析"><!--[--><!--]--> 打包后文件结构分析 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#检查vue-cli-webpack配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="检查vue/cli webpack配置"><!--[--><!--]--> 检查vue/cli webpack配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#开启构建缓存插件" class="router-link-active router-link-exact-active sidebar-item" aria-label="开启构建缓存插件"><!--[--><!--]--> 开启构建缓存插件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#开启多线程" class="router-link-active router-link-exact-active sidebar-item" aria-label="开启多线程"><!--[--><!--]--> 开启多线程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#寻址优化" class="router-link-active router-link-exact-active sidebar-item" aria-label="寻址优化"><!--[--><!--]--> 寻址优化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#import优化" class="router-link-active router-link-exact-active sidebar-item" aria-label="import优化"><!--[--><!--]--> import优化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#打包体积优化" class="router-link-active router-link-exact-active sidebar-item" aria-label="打包体积优化"><!--[--><!--]--> 打包体积优化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#图片压缩" class="router-link-active router-link-exact-active sidebar-item" aria-label="图片压缩"><!--[--><!--]--> 图片压缩 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#代码压缩" class="router-link-active router-link-exact-active sidebar-item" aria-label="代码压缩"><!--[--><!--]--> 代码压缩 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#依赖使用cdn配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="依赖使用CDN配置"><!--[--><!--]--> 依赖使用CDN配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#vue-cli配置说明" class="router-link-active router-link-exact-active sidebar-item" aria-label="Vue Cli配置说明"><!--[--><!--]--> Vue Cli配置说明 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#升级vue-cli5" class="router-link-active router-link-exact-active sidebar-item" aria-label="升级vue/cli5"><!--[--><!--]--> 升级vue/cli5 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#webpack5新特性" class="router-link-active router-link-exact-active sidebar-item" aria-label="webpack5新特性"><!--[--><!--]--> webpack5新特性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#升级流程" class="router-link-active router-link-exact-active sidebar-item" aria-label="升级流程"><!--[--><!--]--> 升级流程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#报错和依赖问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="报错和依赖问题"><!--[--><!--]--> 报错和依赖问题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#打包结果" class="router-link-active router-link-exact-active sidebar-item" aria-label="打包结果"><!--[--><!--]--> 打包结果 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#开启webpack5内置缓存" class="router-link-active router-link-exact-active sidebar-item" aria-label="开启webpack5内置缓存"><!--[--><!--]--> 开启webpack5内置缓存 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#升级前后构建速度对比" class="router-link-active router-link-exact-active sidebar-item" aria-label="升级前后构建速度对比"><!--[--><!--]--> 升级前后构建速度对比 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#分离代码-管家和水滴项目分离" class="router-link-active router-link-exact-active sidebar-item" aria-label="分离代码：管家和水滴项目分离"><!--[--><!--]--> 分离代码：管家和水滴项目分离 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#升级vue2-vite版本" class="router-link-active router-link-exact-active sidebar-item" aria-label="升级vue2+vite版本"><!--[--><!--]--> 升级vue2+vite版本 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#直接升级vue3-vite版本" class="router-link-active router-link-exact-active sidebar-item" aria-label="直接升级vue3+vite版本"><!--[--><!--]--> 直接升级vue3+vite版本 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#分析包大小和结构代码减重" class="router-link-active router-link-exact-active sidebar-item" aria-label="分析包大小和结构代码减重"><!--[--><!--]--> 分析包大小和结构代码减重 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/myblog/frontEnd/project/webpack/application/npmPrams.html" class="sidebar-item" aria-label="npm打包命令传参"><!--[--><!--]--> npm打包命令传参 <!--[--><!--]--></a><!----></li><li><a href="/myblog/frontEnd/project/webpack/application/pxtoviewport.html" class="sidebar-item" aria-label="移动端适配方案： PostCSS px to viewport"><!--[--><!--]--> 移动端适配方案： PostCSS px to viewport <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="vue-构建优化方案及升级流程" tabindex="-1"><a class="header-anchor" href="#vue-构建优化方案及升级流程" aria-hidden="true">#</a> vue 构建优化方案及升级流程</h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#vue及脚手架版本" class="router-link-active router-link-exact-active">vue及脚手架版本</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#实测构建速度" class="router-link-active router-link-exact-active">实测构建速度</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#解决方案梳理" class="router-link-active router-link-exact-active">解决方案梳理</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#原版本构建优化流程" class="router-link-active router-link-exact-active">原版本构建优化流程</a><ul><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#构建时间插件" class="router-link-active router-link-exact-active">构建时间插件</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#打包后文件结构分析" class="router-link-active router-link-exact-active">打包后文件结构分析</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#检查vue-cli-webpack配置" class="router-link-active router-link-exact-active">检查vue/cli webpack配置</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#开启构建缓存插件" class="router-link-active router-link-exact-active">开启构建缓存插件</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#开启多线程" class="router-link-active router-link-exact-active">开启多线程</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#寻址优化" class="router-link-active router-link-exact-active">寻址优化</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#import优化" class="router-link-active router-link-exact-active">import优化</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#打包体积优化" class="router-link-active router-link-exact-active">打包体积优化</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#图片压缩" class="router-link-active router-link-exact-active">图片压缩</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#代码压缩" class="router-link-active router-link-exact-active">代码压缩</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#依赖使用cdn配置" class="router-link-active router-link-exact-active">依赖使用CDN配置</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#vue-cli配置说明" class="router-link-active router-link-exact-active">Vue Cli配置说明</a></li></ul></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#升级vue-cli5" class="router-link-active router-link-exact-active">升级vue/cli5</a><ul><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#webpack5新特性" class="router-link-active router-link-exact-active">webpack5新特性</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#升级流程" class="router-link-active router-link-exact-active">升级流程</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#报错和依赖问题" class="router-link-active router-link-exact-active">报错和依赖问题</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#打包结果" class="router-link-active router-link-exact-active">打包结果</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#开启webpack5内置缓存" class="router-link-active router-link-exact-active">开启webpack5内置缓存</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#升级前后构建速度对比" class="router-link-active router-link-exact-active">升级前后构建速度对比</a></li></ul></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#分离代码-管家和水滴项目分离" class="router-link-active router-link-exact-active">分离代码：管家和水滴项目分离</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#升级vue2-vite版本" class="router-link-active router-link-exact-active">升级vue2+vite版本</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#直接升级vue3-vite版本" class="router-link-active router-link-exact-active">直接升级vue3+vite版本</a></li><li><a aria-current="page" href="/myblog/frontEnd/project/webpack/application/webpackCase.html#分析包大小和结构代码减重" class="router-link-active router-link-exact-active">分析包大小和结构代码减重</a></li></ul></nav><div class="custom-container tip"><p class="custom-container-title">背景</p><p>水滴vue 移动端项目打包速度太慢，严重影响开发效率，需要尽可能提升构建速度，节约开发中的宝贵时间。</p></div><h2 id="vue及脚手架版本" tabindex="-1"><a class="header-anchor" href="#vue及脚手架版本" aria-hidden="true">#</a> vue及脚手架版本</h2><table><thead><tr><th style="text-align:center;">类目</th><th style="text-align:center;">版本</th></tr></thead><tbody><tr><td style="text-align:center;">vue</td><td style="text-align:center;">2.6.10</td></tr><tr><td style="text-align:center;">vue/cli</td><td style="text-align:center;">4.4.1</td></tr><tr><td style="text-align:center;">vant</td><td style="text-align:center;">2.12.44</td></tr><tr><td style="text-align:center;">webpack</td><td style="text-align:center;">4.0...</td></tr></tbody></table><h2 id="实测构建速度" tabindex="-1"><a class="header-anchor" href="#实测构建速度" aria-hidden="true">#</a> 实测构建速度</h2><table><thead><tr><th style="text-align:center;">类目</th><th style="text-align:center;">版本</th></tr></thead><tbody><tr><td style="text-align:center;">冷启动（首次启动dev）</td><td style="text-align:center;">1min, 46 secs</td></tr><tr><td style="text-align:center;">热启动（有缓存启动dev）</td><td style="text-align:center;">46 secs</td></tr><tr><td style="text-align:center;">热加载（ctrl+s 自动刷新页面）</td><td style="text-align:center;">6-10 secs</td></tr><tr><td style="text-align:center;">初次打包构建（build）</td><td style="text-align:center;">2min</td></tr><tr><td style="text-align:center;">有缓存打包构建（build）</td><td style="text-align:center;">1min</td></tr></tbody></table><div class="custom-container tip"><p class="custom-container-title">分析</p><ul><li>频次最多的构建为：热启动，热加载，测试环境打包；（热启动频次较多的原因是，热加载不稳定，会出现未启动加载，或者启动卡顿）<br></li><li>所以，优先级最高的优化，主要集中在热启动，热加载，和测试环境打包的方向。</li></ul></div><h2 id="解决方案梳理" tabindex="-1"><a class="header-anchor" href="#解决方案梳理" aria-hidden="true">#</a> 解决方案梳理</h2><ol><li><p><strong>原版本构建优化配置（主要是webpack配置）：风险最低</strong></p><ul><li>缓存</li><li>多进程</li><li>寻址优化</li><li>分模块构建打包</li><li>抽离拆封项目</li><li>import优化</li><li>打包体积优化</li><li>图片压缩（有损）</li><li>代码压缩</li><li>使用cdn导入依赖</li></ul></li><li><p><strong><code>vue/cli4——vue/cli5 (webpack4——webpack5)</code>：有一定风险</strong></p></li><li><p><strong><code>webpack4——vite</code> ：风险较高</strong></p></li><li><p><strong><code>vue2+webpack4——vue3+vite</code> ： 风险、时间成本最高，但有利提升项目性能和开发效率</strong></p></li><li><p><strong>分析包大小和结构，清除无用依赖和代码 ：后续补充方案</strong></p></li></ol><h2 id="原版本构建优化流程" tabindex="-1"><a class="header-anchor" href="#原版本构建优化流程" aria-hidden="true">#</a> 原版本构建优化流程</h2><h3 id="构建时间插件" tabindex="-1"><a class="header-anchor" href="#构建时间插件" aria-hidden="true">#</a> 构建时间插件</h3><h4 id="speed-measure-webpack-plugin" tabindex="-1"><a class="header-anchor" href="#speed-measure-webpack-plugin" aria-hidden="true">#</a> <code>speed-measure-webpack-plugin</code></h4><p>安装依赖：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev speed-measure-webpack-plugin
<span class="token comment">#或者 or</span>
<span class="token function">yarn</span> <span class="token function">add</span> -D speed-measure-webpack-plugin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> SpeedMeasurePlugin <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;speed-measure-webpack-plugin&#39;</span><span class="token punctuation">)</span>
<span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SpeedMeasurePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// 或者：</span>
<span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">&#39;speed-measure-webpack-plugin&#39;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>SpeedMeasurePlugin<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>打包后生成配置： <img src="/myblog/images/frontEnd/other/performance/1.png" alt="图片"></p><h3 id="打包后文件结构分析" tabindex="-1"><a class="header-anchor" href="#打包后文件结构分析" aria-hidden="true">#</a> 打包后文件结构分析</h3><h4 id="webpack-bundle-analyzer" tabindex="-1"><a class="header-anchor" href="#webpack-bundle-analyzer" aria-hidden="true">#</a> <code>webpack-bundle-analyzer</code></h4><p>安装依赖：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># NPM</span>
<span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-bundle-analyzer
<span class="token comment"># Yarn</span>
<span class="token function">yarn</span> <span class="token function">add</span> -D webpack-bundle-analyzer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> BundleAnalyzerPlugin <span class="token operator">=</span> 
<span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-bundle-analyzer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">;</span>
<span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行命令：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vue-cli-service build --report
<span class="token comment">#or</span>
vue-cli-service build --report-json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>点击生成的连接，打开打包后的文件报告:</p><p><img src="/myblog/images/frontEnd/other/performance/img.png" alt="图片"></p><p>网页文件报告如图所示:</p><p><img src="/myblog/images/frontEnd/other/performance/img_1.png" alt="图片"></p><h3 id="检查vue-cli-webpack配置" tabindex="-1"><a class="header-anchor" href="#检查vue-cli-webpack配置" aria-hidden="true">#</a> 检查vue/cli webpack配置</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vue inspect --mode production <span class="token operator">&gt;</span> output.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>优化vue/cli打包配置前，可以先检查vue/cli脚手架内都有哪些webpack配置</p><p><img src="/myblog/images/frontEnd/other/performance/img_2.png" alt="图片"></p><h3 id="开启构建缓存插件" tabindex="-1"><a class="header-anchor" href="#开启构建缓存插件" aria-hidden="true">#</a> 开启构建缓存插件</h3><h4 id="cache-loader-webpack配置" tabindex="-1"><a class="header-anchor" href="#cache-loader-webpack配置" aria-hidden="true">#</a> <code>cache-loader</code>（webpack配置）</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> cache-loader -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>根据打包耗时分析，配置耗时最多的loader开启缓存</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// vue.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
   config<span class="token punctuation">.</span>module<span class="token punctuation">.</span>rules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
        <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;cache-loader&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;url-loader&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;cache-loader&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="直接开启-vue-cli" tabindex="-1"><a class="header-anchor" href="#直接开启-vue-cli" aria-hidden="true">#</a> 直接开启（vue/cli）</h4><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  config<span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实际上，<code>Vue-Cli4</code> 已经内置了 <code>cache-loader</code> 进行以下两个的缓存了，在<code>.cache</code>文件中可以看到</p><p><img src="/myblog/images/frontEnd/other/performance/img_3.png" alt="图片"></p><h4 id="hard-source-webpack-plugin-插件" tabindex="-1"><a class="header-anchor" href="#hard-source-webpack-plugin-插件" aria-hidden="true">#</a> <code>hard-source-webpack-plugin</code> 插件</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i hard-source-webpack-plugin -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在vue.config.js中配置：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> HardSourceWebpackPlugin  <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;hard-source-webpack-plugin&#39;</span><span class="token punctuation">)</span>
<span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   config<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">&#39;cache&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>HardSourceWebpackPlugin<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/***********或者**********************/</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>plugin<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
      <span class="token comment">// 为模块提供中间缓存，缓存路径是：node_modules/.cache/hard-source</span>
      <span class="token keyword">new</span> <span class="token class-name">HardSourceWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        root<span class="token operator">:</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        directories<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        environmentHash<span class="token operator">:</span> <span class="token punctuation">{</span>
          root<span class="token operator">:</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          directories<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          files<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;package.json&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;yarn.lock&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// 配置了files的主要原因是解决配置更新，</span>
      <span class="token comment">// cache不生效了的问题，配置后有包的变化，plugin会重新构建一部分cache</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">总结</p><ul><li>再启动，虽然看到里<code>.cache</code>文件中新生成了一起缓存文件，但是进度条到94%就无法启动了，查到<code>HardSourceWebpackPlugin</code> <code>GitHub</code>文档发现， 已经五年未更新过了，这个插件已经不在维护，无法使用了。</li><li>虽然<code>vue/cli4</code>中默认添加了<code>vue,label</code>，两个 <code>loader</code> 的缓存，但是效果不是很理想，热启动，热加载时间依旧比较长。</li></ul></div><h3 id="开启多线程" tabindex="-1"><a class="header-anchor" href="#开启多线程" aria-hidden="true">#</a> 开启多线程</h3><h4 id="vue-cli开启多线程" tabindex="-1"><a class="header-anchor" href="#vue-cli开启多线程" aria-hidden="true">#</a> vue/cli开启多线程</h4><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  parallel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="thread-loader-webpack开启多线程" tabindex="-1"><a class="header-anchor" href="#thread-loader-webpack开启多线程" aria-hidden="true">#</a> <code>thread-loader</code> (Webpack开启多线程)</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> thread-loader --save-dev 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在vue.config.js中添加配置</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        include<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;src&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;thread-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token comment">// 耗时的 loader （例如 babel-loader）</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>发现<code>vue/cli4</code>中已经默认开启多线程构建，无需新增配置。</li></ul><h3 id="寻址优化" tabindex="-1"><a class="header-anchor" href="#寻址优化" aria-hidden="true">#</a> 寻址优化</h3><p>缩小文件检索解析范围：(添加后没有效果)</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// vue.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
   configureWebpack<span class="token operator">:</span><span class="token punctuation">{</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
      noParse<span class="token operator">:</span> 
      <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(vue|vue-router|vuex|vuex-router-sync|lodash|echarts|axios|view-design)$</span><span class="token regex-delimiter">/</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="import优化" tabindex="-1"><a class="header-anchor" href="#import优化" aria-hidden="true">#</a> import优化</h3><h4 id="babel-plugin-dynamic-import-node" tabindex="-1"><a class="header-anchor" href="#babel-plugin-dynamic-import-node" aria-hidden="true">#</a> <code>babel-plugin-dynamic-import-node</code></h4><p>运用这个插件能在代码使用了import语法的情况下，大大提高代码的编译速度。但是配置后没有明显效果</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev babel-plugin-dynamic-import-node
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>修改babel.config.js配置</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@vue/cli-plugin-babel/preset&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span>
    development<span class="token operator">:</span> <span class="token punctuation">{</span>
      plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;dynamic-import-node&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="打包体积优化" tabindex="-1"><a class="header-anchor" href="#打包体积优化" aria-hidden="true">#</a> 打包体积优化</h3><p>production环境不生成SourceMap（我们项目中已经配置）</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  lintOnSave<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  productionSourceMap<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span> 
  <span class="token comment">//打包不生成map文件</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="图片压缩" tabindex="-1"><a class="header-anchor" href="#图片压缩" aria-hidden="true">#</a> 图片压缩</h3><h4 id="image-webpack-plugin" tabindex="-1"><a class="header-anchor" href="#image-webpack-plugin" aria-hidden="true">#</a> <code>image-webpack-plugin</code></h4><ul><li>对图片像素要求没很极致的，这个压缩还是可以使用的，压缩率肉眼看起来感觉是没太大区别。没有对svg进行压缩， 原因是压缩的svg,再通过构建时被打包成base64时，生成的base64会有问题，无法访问。</li><li><code>url-loader</code> 和 <code>image-webpack-loader</code> 不能一起使用，否则会导致图片出不来</li><li>一定要先写 <code>‘file-loader’</code> 才能使用 <code>‘image-webpack-loader’</code></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev image-webpack-loader
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在vue.config.js中配置图片压缩</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token comment">// 对图片进行压缩</span>
    config<span class="token punctuation">.</span>module
      <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&#39;images&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif)(\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;image-webpack-loader&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span><span class="token string">&#39;image-webpack-loader&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token punctuation">{</span> bypassOnDebug<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="代码压缩" tabindex="-1"><a class="header-anchor" href="#代码压缩" aria-hidden="true">#</a> 代码压缩</h3><p>使用 <code>gzip</code> 压缩代码，效果显著。（报错，版本问题）</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> compression-webpack-plugin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在vue.config.js中配置</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> CompressionWebpackPlugin <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;compression-webpack-plugin&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 生产环境下生效</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 配置 gzip 压缩</span>
      config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">CompressionWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$|\.html$|\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          threshold<span class="token operator">:</span> <span class="token number">4096</span> <span class="token comment">// 超过4kb压缩</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="依赖使用cdn配置" tabindex="-1"><a class="header-anchor" href="#依赖使用cdn配置" aria-hidden="true">#</a> 依赖使用CDN配置</h3><p>将公用库改为cdn引入方式，加快访问速度，注入html的插件无需安装，已经内置，但是不安全， 一般不建议这样操作。除非将依赖配置到公司自己的CDN服务器上。</p><h3 id="vue-cli配置说明" tabindex="-1"><a class="header-anchor" href="#vue-cli配置说明" aria-hidden="true">#</a> Vue Cli配置说明</h3><p>官网地址：<a href="https://cli.vuejs.org/zh/guide/webpack.html" target="_blank" rel="noopener noreferrer">https://cli.vuejs.org/zh/guide/webpack.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="configurewebpack" tabindex="-1"><a class="header-anchor" href="#configurewebpack" aria-hidden="true">#</a> configureWebpack</h4><p>调整 <code>webpack</code> 配置最简单的方式就是在 <code>vue.config.js</code> 中的 <code>configureWebpack</code> 选项提供一个对象： 该对象将会被 <code>webpack-merge </code>合并入最终的 <code>webpack</code> 配置。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// vue.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  configureWebpack<span class="token operator">:</span> <span class="token punctuation">{</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">MyAwesomeWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="链式操作-高级" tabindex="-1"><a class="header-anchor" href="#链式操作-高级" aria-hidden="true">#</a> 链式操作 (高级)</h4><ul><li><code>Vue CLI</code> 内部的 <code>webpack</code> 配置是通过 <code>webpack-chain</code> 维护的。这个库提供了一个 <code>webpack</code> 原始配置的上层抽象， 使其可以定义具名的 <code>loader</code> 规则和具名插件，并有机会在后期进入这些规则并对它们的选项进行修改。</li><li>它允许我们更细粒度的控制其内部配置。接下来有一些常见的在 <code>vue.config.js</code> 中的 <code>chainWebpack</code> 修改的例子。</li></ul><p>修改 Loader 选项</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// vue.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>module
      <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&#39;vue&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;vue-loader&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>
      options <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 修改它的选项...</span>
        <span class="token keyword">return</span> options
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>对于 <code>CSS</code> 相关 <code>loader</code> 来说，我们推荐使用 <code>css.loaderOptions</code> 而不是直接链式指定 <code>loader</code>。这是因为每种 <code>CSS</code> 文件类型都有多个规则，</li><li>而 <code>css.loaderOptions</code> 可以确保你通过一个地方影响所有的规则。</li></ul><h4 id="externals" tabindex="-1"><a class="header-anchor" href="#externals" aria-hidden="true">#</a> externals</h4><ul><li><code>externals</code> 配置提供了不从 <code>bundle</code> 中引用依赖的方式。</li><li>简单理解就是不通过npm下载的类库，在html文件中以script引入， 然后在页面中使用import导入的这种方式，比如我们前面说道的CDN导入依赖的方式</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 配置 cdn，这里将 vue，vue-router 和 axios 三个包配置成 cdn 引入</span>
    <span class="token comment">// 其中 Vue，VueRouter 等名称是该库暴露在全局中的变量名</span>
    config<span class="token punctuation">.</span>externals <span class="token operator">=</span> <span class="token punctuation">{</span>
      vue<span class="token operator">:</span> <span class="token string">&#39;Vue&#39;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;vue-router&#39;</span><span class="token operator">:</span> <span class="token string">&#39;VueRouter&#39;</span><span class="token punctuation">,</span>
      axios<span class="token operator">:</span> <span class="token string">&#39;axios&#39;</span><span class="token punctuation">,</span>
      html2canvas<span class="token operator">:</span> <span class="token string">&quot;html2canvas&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>通过以上在vue/cli(webpack4中的配置），效果并不是很明显，大部分方式没有产生有效的作用， 所以我们还是需要尝试使用升级项目脚手架以及其他依赖的方式，提升效果打包速度、项目性能，以及开发效率。</li></ul><h2 id="升级vue-cli5" tabindex="-1"><a class="header-anchor" href="#升级vue-cli5" aria-hidden="true">#</a> 升级vue/cli5</h2><h3 id="webpack5新特性" tabindex="-1"><a class="header-anchor" href="#webpack5新特性" aria-hidden="true">#</a> webpack5新特性</h3><ul><li><p><strong>持久化缓存的优化</strong><br> v4是根据代码的结构生成 <strong>chunkhash</strong>，现在v5根据完全内容生成 <strong>chunkhash</strong>，比如改了内容的注释或者变量则不会引起<strong>chunkhash</strong>的变化，让浏览器继续使用缓存。</p></li><li><p><strong>剔除<code>npm</code>包里面针对<code>Node.js</code>模块自动引用的<code>Polyfills</code></strong><br> v4编译引入npm包，有些npm包里面包含针对nodejs的<strong>polyfills</strong>，实际前端浏览器是不需要的，v5编译中，会出现<code>polyfill</code>添加提示， 如果不需要<strong>node polyfille</strong>,按照提示 alias 设置为 false 即可</p></li><li><p><strong><code>Tree Shaking</code>升级</strong><br><code>tree shaking </code>的意思是，<code>webpack</code> 在打包的时候将会剔除掉被没有被使用到的代码达到减小报体积，缩短 http 请求时间，起到一定效果的页面优化。</p></li><li><p><strong>代码分割<code>splitchunk</code>升级</strong><br> 为了让我们的打出来的包体积更加小，颗粒度更加明确</p></li></ul><h3 id="升级流程" tabindex="-1"><a class="header-anchor" href="#升级流程" aria-hidden="true">#</a> 升级流程</h3><p>官网文档：<a href="https://cli.vuejs.org/migrations/migrate-from-v4.html" target="_blank" rel="noopener noreferrer">https://cli.vuejs.org/migrations/migrate-from-v4.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> uninstall -g @vue/cli

<span class="token function">npm</span> <span class="token function">install</span> -g @vue/cli
<span class="token comment"># OR</span>
<span class="token function">yarn</span> global <span class="token function">add</span> @vue/cli

vue -V  // <span class="token number">5.0</span>.8

vue upgrade
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/myblog/images/frontEnd/other/performance/img_4.png" alt="图片"></p><p>升级后变更的依赖：</p><p><img src="/myblog/images/frontEnd/other/performance/img_5.png" alt="图片"></p><h3 id="报错和依赖问题" tabindex="-1"><a class="header-anchor" href="#报错和依赖问题" aria-hidden="true">#</a> 报错和依赖问题</h3><h4 id="出现一个版本问题报错-指向到vue-config-js中的images配置" tabindex="-1"><a class="header-anchor" href="#出现一个版本问题报错-指向到vue-config-js中的images配置" aria-hidden="true">#</a> 出现一个版本问题报错，指向到vue.config.js中的images配置，</h4><p>查阅文档后发现，vue/cli5图片处理弃用了<code>url-loader</code>的方式，改用<code>parser</code>的方式</p><p><img src="/myblog/images/frontEnd/other/performance/img_6.png" alt="图片"></p><p>更新配置：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// vue/cli 4</span>
config<span class="token punctuation">.</span>module
    <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&#39;images&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;url-loader&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span><span class="token string">&#39;url-loader&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        limit<span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
<span class="token comment">// vue/cli 5</span>
config<span class="token punctuation">.</span>module
    <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&#39;images&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;parser&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        dataUrlCondition<span class="token operator">:</span> <span class="token punctuation">{</span>
            maxSize<span class="token operator">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="overlay配置报错-这个是为了方式eslint代码检测导致的报错中断构建" tabindex="-1"><a class="header-anchor" href="#overlay配置报错-这个是为了方式eslint代码检测导致的报错中断构建" aria-hidden="true">#</a> overlay配置报错，这个是为了方式eslint代码检测导致的报错中断构建</h4><p><img src="/myblog/images/frontEnd/other/performance/img_7.png" alt="图片"></p><p>这个配置在vue-cli 5.x版本里会不兼容，要去掉，新的eslint已优化了相关配置，不需要单独设置overlay,<strong>删除这项配置即可</strong></p><p><img src="/myblog/images/frontEnd/other/performance/img_8.png" alt="图片"></p><h4 id="出现了路径错误" tabindex="-1"><a class="header-anchor" href="#出现了路径错误" aria-hidden="true">#</a> <strong>出现了路径错误：</strong></h4><p><img src="/myblog/images/frontEnd/other/performance/img_9.png" alt="图片"></p><p>这种取图方式vue/cli5不支持会报错，<strong>需要用本地路径替换</strong></p><p><img src="/myblog/images/frontEnd/other/performance/img_10.png" alt="图片"></p><h4 id="路由配置文件里找不到的页面在vue-cli5会报错-需要删除" tabindex="-1"><a class="header-anchor" href="#路由配置文件里找不到的页面在vue-cli5会报错-需要删除" aria-hidden="true">#</a> <strong>路由配置文件里找不到的页面在vue/cli5会报错，需要删除</strong></h4><p><img src="/myblog/images/frontEnd/other/performance/img_12.png" alt="图片"></p><h4 id="静态文件里有一个快捷方式文件-vue-cli5静态文件处理时会报错-静态资源处理会报错-删除即可" tabindex="-1"><a class="header-anchor" href="#静态文件里有一个快捷方式文件-vue-cli5静态文件处理时会报错-静态资源处理会报错-删除即可" aria-hidden="true">#</a> <strong>静态文件里有一个快捷方式文件，vue/cli5静态文件处理时会报错，静态资源处理会报错，删除即可</strong></h4><p><img src="/myblog/images/frontEnd/other/performance/img_11.png" alt="图片"></p><h4 id="postcss报错" tabindex="-1"><a class="header-anchor" href="#postcss报错" aria-hidden="true">#</a> <strong>postcss报错</strong></h4><p><img src="/myblog/images/frontEnd/other/performance/img_14.png" alt="图片"></p><p>vue/cli5 升级到postCss8 需要更新postcss-loader 或者<strong>更新postcss 8.0以上</strong></p><p><img src="/myblog/images/frontEnd/other/performance/img_15.png" alt="图片"><img src="/myblog/images/frontEnd/other/performance/img_16.png" alt="图片"></p><h4 id="修改完postcss版本后-postcss-pxtorem-失效了" tabindex="-1"><a class="header-anchor" href="#修改完postcss版本后-postcss-pxtorem-失效了" aria-hidden="true">#</a> 修改完postcss版本后，postcss-pxtorem 失效了，</h4><ul><li>最终发现，因为我在 <code>package.json</code> 中配置了 <code>postcss</code> ,所以 <code>postcss.config.js</code> 就不会执行了</li><li>需要关闭 <code>package.json</code> 和 <code>vue.config.js</code> 中的配置，只保留 <code>postcss.config.js</code> 才会生效</li></ul><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// package.json 中删除这段配置</span>
<span class="token property">&quot;postcss&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;autoprefixer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>配置完成后发现，<code>vant</code>, 和 <code>guanjia_page_</code> 的文件并没有生效，说明 <code>postcss.config.js</code> 中的判断无效，</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> autoprefixer <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;autoprefixer&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> pxtorem <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;postcss-pxtorem&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> file <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">666666666666666666666666666666</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span>
   <span class="token keyword">let</span> rootValue
   <span class="token keyword">if</span> <span class="token punctuation">(</span>file <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>basename <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>basename<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;guanjia_page_&#39;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      rootValue <span class="token operator">=</span> <span class="token number">37.5</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>file <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>dirname <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>dirname<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;vant&#39;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      rootValue <span class="token operator">=</span> <span class="token number">37.5</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      rootValue <span class="token operator">=</span> <span class="token number">108</span>
   <span class="token punctuation">}</span>
   <span class="token comment">// .................</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>我们打印一下 file 这个传参，发现 webpack5 中 file 并非是一个对象，而是文件的绝对路径字符串</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">666666666666666666666666666666</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span>
<span class="token number">6.666666666666666e+29</span> <span class="token constant">G</span><span class="token operator">:</span>\persnal\web<span class="token operator">-</span>php\app<span class="token operator">-</span>shuidi\view\vue\node_modules\vant\es\popover\index<span class="token punctuation">.</span>less
<span class="token number">6.666666666666666e+29</span> <span class="token constant">G</span><span class="token operator">:</span>\persnal\web<span class="token operator">-</span>php\app<span class="token operator">-</span>shuidi\view\vue\node_modules\vant\es\divider\index<span class="token punctuation">.</span>less
<span class="token number">6.666666666666666e+29</span> <span class="token constant">G</span><span class="token operator">:</span>\persnal\web<span class="token operator">-</span>php\app<span class="token operator">-</span>shuidi\view\vue\src\components\common\auto<span class="token operator">-</span>complete<span class="token punctuation">.</span>vue
<span class="token number">6.666666666666666e+29</span> <span class="token constant">G</span><span class="token operator">:</span>\persnal\web<span class="token operator">-</span>php\app<span class="token operator">-</span>shuidi\view\vue\src\components\risk\RiskNotice<span class="token punctuation">.</span>vue
<span class="token number">6.666666666666666e+29</span> <span class="token constant">G</span><span class="token operator">:</span>\persnal\web<span class="token operator">-</span>php\app<span class="token operator">-</span>shuidi\view\vue\src\components\maptree\maptree<span class="token operator">-</span>structure<span class="token punctuation">.</span>vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>所以，重新修改判读，取用 file 字符串判，移动端适配即可生效</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> autoprefixer <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;autoprefixer&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> pxtorem <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;postcss-pxtorem&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> file <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> rootValue
    <span class="token keyword">if</span> <span class="token punctuation">(</span>file <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;guanjia_page_&#39;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        rootValue <span class="token operator">=</span> <span class="token number">37.5</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>file <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;vant&#39;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        rootValue <span class="token operator">=</span> <span class="token number">37.5</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        rootValue <span class="token operator">=</span> <span class="token number">108</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token function">autoprefixer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">pxtorem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                rootValue<span class="token operator">:</span> rootValue<span class="token punctuation">,</span>
                propList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                minPixelValue<span class="token operator">:</span> <span class="token number">2</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再次测试环境打包:</p><p><img src="/myblog/images/frontEnd/other/performance/img_17.png" alt="图片"></p><h4 id="因为webpack-构建回调异常-执行命令后-启动构建了两次-run-done钩子也执行了两次" tabindex="-1"><a class="header-anchor" href="#因为webpack-构建回调异常-执行命令后-启动构建了两次-run-done钩子也执行了两次" aria-hidden="true">#</a> <strong>因为webpack 构建回调异常，执行命令后，启动构建了两次，run,done钩子也执行了两次</strong></h4><p><img src="/myblog/images/frontEnd/other/performance/img_18.png" alt="图片"></p><p><strong>解决方法:</strong></p><ol><li>修改 browserslist，一般在 package.json 中或者单独的 <code>.browserslistrc</code> 文件中，添加一个 not ie 11</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;not dead&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;not ie 11&quot;</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>执行 build 的时候加一个 --no-module</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vue-cli-service build --no-module
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>参考连接：<a href="https://blog.csdn.net/weixin_44243061/article/details/124401155" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_44243061/article/details/124401155 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="打包日志里有好多警告-是指向vant下的less文件的-加载顺序冲突" tabindex="-1"><a class="header-anchor" href="#打包日志里有好多警告-是指向vant下的less文件的-加载顺序冲突" aria-hidden="true">#</a> <strong>打包日志里有好多警告，是指向vant下的less文件的, 加载顺序冲突</strong></h4><p><img src="/myblog/images/frontEnd/other/performance/img_20.png" alt="图片"></p><p><strong>vue.config.js中增加：（忽略顺序）配置</strong></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>css<span class="token operator">:</span> <span class="token punctuation">{</span>
    extract<span class="token operator">:</span> <span class="token punctuation">{</span>
        ignoreOrder<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="升级后其他人git-pull项目后-安装依赖会对等依赖警告中断安装" tabindex="-1"><a class="header-anchor" href="#升级后其他人git-pull项目后-安装依赖会对等依赖警告中断安装" aria-hidden="true">#</a> <strong>升级后其他人git pull项目后，安装依赖会对等依赖警告中断安装</strong></h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>peerDependencies WARNING vue-pdf@4.3.0 › worker-loader@^2.0.0 requires a peer of webpack@^3.0.0 <span class="token operator">||</span> ^4.0.0-alpha.0 <span class="token operator">||</span> ^4.0.0 but webpack@5.75.0 was installed
peerDependencies WARNING cytoscape-node-html-label@^1.2.0 requires a peer of @types/cytoscape@^3.1.0 but none was installed
peerDependencies WARNING @vue/cli-service@5.0.8 › webpack-dev-server@4.11.1 › ws@^8.4.2 requires a peer of bufferutil@^4.0.1 but none was installed
peerDependencies WARNING @vue/cli-service@5.0.8 › webpack-bundle-analyzer@4.7.0 › ws@^7.3.1 requires a peer of bufferutil@^4.0.1 but none was installed
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>说明：</strong></p><ul><li>在NPM v7中，现在默认安装 <code>peerDependencies</code>。</li><li>在很多情况下，这会导致版本冲突，从而中断安装过程。</li><li><code>--legacy-peer-deps</code>标志是在v7中引入的，目的是绕过 <code>peerDependency</code> 自动安装；它告诉 NPM 忽略项目中引入的各个modules之间的相同modules但不同版本的问题并继续安装， 保证各个引入的依赖之间对自身所使用的不同版本modules共存。<br><strong>解决方法：安装依赖使用<code>--legacy-peer-deps</code>标志</strong><br></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --legacy-peer-deps
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="module-not-found-未找到core-js报错" tabindex="-1"><a class="header-anchor" href="#module-not-found-未找到core-js报错" aria-hidden="true">#</a> <strong>Module not found 未找到core-js报错</strong></h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> error  <span class="token keyword">in</span> ./node_modules/vue-router/dist/vue-router.esm.js

Module not found: Error: Can<span class="token string">&#39;t resolve &#39;</span>core-js/modules/es.array.push.js<span class="token string">&#39; in &#39;</span>G:<span class="token punctuation">\</span>wamp64<span class="token punctuation">\</span>www<span class="token punctuation">\</span>web-php<span class="token punctuation">\</span>app-shuidi<span class="token punctuation">\</span>view<span class="token punctuation">\</span>vue<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>vue-router<span class="token punctuation">\</span>dist<span class="token string">&#39;

 Failed to resolve loader: core-js/modules/es.array.push.js&#39;</span> <span class="token keyword">in</span> &#39;G:<span class="token punctuation">\</span>wamp64<span class="token punctuation">\</span>www<span class="token punctuation">\</span>web-php<span class="token punctuation">\</span>app-shuidi<span class="token punctuation">\</span>view<span class="token punctuation">\</span>vue<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>vant<span class="token punctuation">\</span>es<span class="token punctuation">\</span>uploader
You may need to <span class="token function">install</span> it.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>解决方法，删除依赖包，先npm install core-js --save, 再执行npm install</strong></p><h4 id="启动页面报错-regeneratorruntime-找不到-使用await问题" tabindex="-1"><a class="header-anchor" href="#启动页面报错-regeneratorruntime-找不到-使用await问题" aria-hidden="true">#</a> <strong>启动页面报错：regeneratorRuntime 找不到，使用await问题</strong></h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>shuidi.f5c3d64e.js:formatted:5473 Uncaught ReferenceError: regeneratorRuntime is not defined
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>解决方法：安装配置：regeneratorRuntime</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @babel/plugin-transform-runtime
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* babel.config.js */</span>
<span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="打包后代码未更新-静态资源git状态异常-重置git状态" tabindex="-1"><a class="header-anchor" href="#打包后代码未更新-静态资源git状态异常-重置git状态" aria-hidden="true">#</a> <strong>打包后代码未更新：静态资源git状态异常，重置git状态</strong></h4><p><strong>解决方法：检查静态文件git状态，或重新克隆静态文件仓库</strong></p><h4 id="资源锁定-因为目录下启动了cmd-关闭即可" tabindex="-1"><a class="header-anchor" href="#资源锁定-因为目录下启动了cmd-关闭即可" aria-hidden="true">#</a> <strong>资源锁定：因为目录下启动了cmd,关闭即可</strong></h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">(</span>node:14508<span class="token punctuation">)</span> UnhandledPromiseRejectionWarning: Error: EBUSY: resource busy or locked, <span class="token function">rmdir</span> <span class="token string">&#39;G:\wamp64\www\static\shuidivue&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="core-js未指定警报-需要在babel-config-js中指定版本" tabindex="-1"><a class="header-anchor" href="#core-js未指定警报-需要在babel-config-js中指定版本" aria-hidden="true">#</a> <strong>core.js未指定警报： 需要在babel.config.js中指定版本</strong></h4><p><strong>core.js介绍：</strong> <a href="https://q.shanyue.tech/engineering/734.html" target="_blank" rel="noopener noreferrer">https://q.shanyue.tech/engineering/734.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="打包部署node服务器出现net-err-aborted-404-not-found-问题解决" tabindex="-1"><a class="header-anchor" href="#打包部署node服务器出现net-err-aborted-404-not-found-问题解决" aria-hidden="true">#</a> <strong>打包部署node服务器出现net::ERR_ABORTED 404 (Not Found)问题解决</strong></h4><p>参考链接：<a href="https://blog.51cto.com/u_15346041/3664766" target="_blank" rel="noopener noreferrer">https://blog.51cto.com/u_15346041/3664766<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> <span class="token string">&quot;./&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="弃用node-sass-改用dart-sass替换" tabindex="-1"><a class="header-anchor" href="#弃用node-sass-改用dart-sass替换" aria-hidden="true">#</a> 弃用node-sass, 改用dart-sass替换</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> uninstall node-sass -D
<span class="token function">npm</span> i sass -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>项目中样式有用 /deep/ ；如果使用 less 对 css 做出预处理的话， 使用 /deep/ 就可以完成样式穿透的行为；如果使用的 scss 对 css 做出的预处理， ::v-deep 替换了 /deep/ 就解决这个问题。</li></ul><h4 id="css热更新异常问题" tabindex="-1"><a class="header-anchor" href="#css热更新异常问题" aria-hidden="true">#</a> css热更新异常问题</h4><ul><li>extract配置导致， 删除配置，逐一解决警告</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// vue.cofig.ts</span>
extract<span class="token operator">:</span> <span class="token punctuation">{</span>
    ignoreOrder<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// 语法过时
background-image: linear-gradient(left, #f9dfc5, #dfab6e);
替代为
linear-gradient(to right, #f9dfc5, #dfab6e)

// 空值警告 enterprise-change.vue
background: url(&#39;&#39;) 

// import语法
import SwiperCore, { Autoplay , EffectCube } from &quot;swiper&quot;;

// v-for未加key键值
&lt;van-swipe-item v-for=&quot;item in datas.recommend&quot;&gt;: 
component lists rendered with v-for should have explicit keys
替换为
&lt;van-swipe-item v-for=&quot;(item,index) in datas.recommend&quot; :key=&quot;index&quot;&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="新增预发布环境-解决上线问题" tabindex="-1"><a class="header-anchor" href="#新增预发布环境-解决上线问题" aria-hidden="true">#</a> 新增预发布环境，解决上线问题</h4><p>..........</p><h3 id="打包结果" tabindex="-1"><a class="header-anchor" href="#打包结果" aria-hidden="true">#</a> 打包结果</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// 冷启动，无缓存</span>
General output time took <span class="token number">1</span> min<span class="token punctuation">,</span> <span class="token number">30.76</span> secs
<span class="token comment">// 热启动，有缓存（只有label-loader)</span>
General output time took <span class="token number">1</span> min<span class="token punctuation">,</span> <span class="token number">12.04</span> secs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="开启webpack5内置缓存" tabindex="-1"><a class="header-anchor" href="#开启webpack5内置缓存" aria-hidden="true">#</a> 开启webpack5内置缓存</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">&#39;filesystem&#39;</span><span class="token punctuation">,</span>
        allowCollectingMemory<span class="token operator">:</span> <span class="token boolean">true</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>缓存文件里多了一个webpack</p><p><img src="/myblog/images/frontEnd/other/performance/img_13.png" alt="图片"></p><h3 id="升级前后构建速度对比" tabindex="-1"><a class="header-anchor" href="#升级前后构建速度对比" aria-hidden="true">#</a> 升级前后构建速度对比</h3><table><thead><tr><th style="text-align:center;">构建类别</th><th style="text-align:center;">升级前构建时间</th><th style="text-align:center;">升级后构建时间</th><th style="text-align:center;">提升幅度</th></tr></thead><tbody><tr><td style="text-align:center;">冷启动（首次启动dev）</td><td style="text-align:center;">1min, 46 secs</td><td style="text-align:center;">1min, 30secs</td><td style="text-align:center;">不变</td></tr><tr><td style="text-align:center;">热启动（有缓存启动dev）</td><td style="text-align:center;">46 secs</td><td style="text-align:center;"><strong>13 secs</strong></td><td style="text-align:center;"><strong>70%</strong></td></tr><tr><td style="text-align:center;">热加载（ctrl+s 自动刷新页面）</td><td style="text-align:center;">6-10 secs</td><td style="text-align:center;"><strong>2-3 secs</strong></td><td style="text-align:center;"><strong>70%</strong></td></tr><tr><td style="text-align:center;">初次打包构建（build）</td><td style="text-align:center;">2min+</td><td style="text-align:center;">2 min</td><td style="text-align:center;">不变</td></tr><tr><td style="text-align:center;">有缓存打包构建（build）</td><td style="text-align:center;">1min+</td><td style="text-align:center;"><strong>14 secs</strong></td><td style="text-align:center;"><strong>80%</strong></td></tr></tbody></table><h2 id="分离代码-管家和水滴项目分离" tabindex="-1"><a class="header-anchor" href="#分离代码-管家和水滴项目分离" aria-hidden="true">#</a> 分离代码：管家和水滴项目分离</h2><p><strong>仅打包管家项目代码：关闭shuidi入口</strong></p><p><img src="/myblog/images/frontEnd/other/performance/img_21.png" alt="图片"></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// 冷启动</span>
General output time took <span class="token number">42.92</span> secs
<span class="token comment">// 热启动</span>
General output time took <span class="token number">4.24</span> secs
<span class="token comment">// 热加载</span>
General output time took <span class="token number">1.77</span> secs
<span class="token comment">// 首次打包</span>
General output time took <span class="token number">49.47</span> secs
<span class="token comment">// 有缓存打包</span>
General output time took <span class="token number">6.97</span> secs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>仅打包水滴信用项目：关闭guanjia入口</strong></p><p><img src="/myblog/images/frontEnd/other/performance/img_22.png" alt="图片"></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// 冷启动</span>
General output time took <span class="token number">1</span> min<span class="token punctuation">,</span> <span class="token number">37.48</span> secs
<span class="token comment">// 热启动</span>
General output time took <span class="token number">11.32</span> secs
<span class="token comment">// 热更新</span>
General output time took <span class="token number">2.66</span> secs
<span class="token comment">// 首次打包</span>
General output time took <span class="token number">1</span> min<span class="token punctuation">,</span> <span class="token number">46.26</span> secs
<span class="token comment">// 再次打包</span>
General output time took <span class="token number">7.24</span> secs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="升级vue2-vite版本" tabindex="-1"><a class="header-anchor" href="#升级vue2-vite版本" aria-hidden="true">#</a> 升级vue2+vite版本</h2><h2 id="直接升级vue3-vite版本" tabindex="-1"><a class="header-anchor" href="#直接升级vue3-vite版本" aria-hidden="true">#</a> 直接升级vue3+vite版本</h2><h2 id="分析包大小和结构代码减重" tabindex="-1"><a class="header-anchor" href="#分析包大小和结构代码减重" aria-hidden="true">#</a> 分析包大小和结构代码减重</h2></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: haohaidong@pingansec.com">hhd</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/myblog/frontEnd/project/webpack/application/npmPrams.html" class="" aria-label="npm打包命令传参"><!--[--><!--]--> npm打包命令传参 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/myblog/assets/app.4c8b15c1.js" defer></script>
  </body>
</html>
