

# 小程序性能优化
[[toc]]


![图片](/images/frontEnd/img_4.png)

### 图片优化
- 使用图片懒加载，未显示的部分不加载（适用于滑动加载长页面）
- 雪碧图技术，整张图片切出icon（不利于后期维护）
- 拆分域名，接口，文件，图片使用不同域名 （图片单独域名）
- cdn内容分发 （已使用）
- 图片开启http缓存，在服务器端配置请求头cache-control（已配置）
- 开发阶段尽量控制图片请求量，icon用字体或者组件库代替
- 开发图片icon转字体插件,减少http请求和本地资源大小 (未实现）

### 未使用依赖清除
- 依赖分析和清除
  ![图片](/images/frontEnd/img_5.png)
- - 分包echarts,完成手写蜘蛛图后替换  替换后减少960kb（已完成）

### 减重后数据统计
- （使用小程序助手数据分析）
- 减重后数据统计：减重比例：42%；
- 减重量：3253-1892=1361KB
- 打开率：从平均92%—94%以上 ；  低端机从低于88%—90%以上
- 小程序总体启动时间：从平均4.7s—4.4s;   安卓机从5.3s—5秒以内

### 打开小程序按需注入
- 使用真机调试查看注入量
```ts
// app.json文件
{
  lazyCodeLoading: "requiredComponents"
}
```

### 使用分包加载
- 独立分包无法使用主包内公共依赖和组件
- 分包预加载使用局限较大，不适用信用管家项目


### 数据预拉取
- 说明：在冷启动时通过微信后台向服务器拉取业务数据，减少了首屏渲染等待时间；
- 除首页其他页接口量较小

### 数据持久化：全局数据和缓存的合理利用

### 小程序状态管理
